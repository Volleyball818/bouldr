---
title: "Testing"
output: html_document
---

# Setup

```{r}
set.seed(2020)
source('gen_test_data.R')
source('bouldr.R')
source('rocplot.R')
# source("module 1.R")
# source("module 2.R")

dd <- gen.test.data(10,Diagnosis = c("Depression","Anxiety"),
                          Measure = c("A","B"),
                          Informant = c("Self","Parent"))

```



```{r}
# dd$Outcome <- case_when(
#   dd$Outcome == "yes" ~ 1,
#   dd$Outcome == "no" ~ 0
# )
single <- bouldr(dat = dd,
            f = Outcome ~ Score,
            test = 'delong',
            levels = c('no','yes'),
            direction = "<")

multiple <- bouldr(dat = dd,
            f = Outcome ~ Score + Informant,
            test = 'delong',
            levels = c('no','yes'),
            direction = "<")

nested <- bouldr(dat = dd,
            f = Outcome ~ Score + Informant + Diagnosis,
            test = 'delong',
            levels = c('no','yes'),
            direction = "<")

# attributes(r)
```

```{r}
rocplot(single) + labs(title = "Demo of rocplot function using test data")
```

```{r}
rocplot(multiple) + labs(title = "Demo of rocplot function using test data")
```

```{r}
rocplot(nested) + labs(title = "Demo of rocplot function using test data")
```

```{r}
tests(nested)
```

```{r}
aucs(single)
```

New idea for package name: bouldr

TODO: test this on some real data
TODO: format as a real R package?
TODO: add more documentation
TODO: add print and summary functions to bouldr object
TODO: allow additional arguments to be passed to roc and roc.test
TODO: make the test for AUC =/= .5 more robust; bootstrapping?
TODO: make the legend title for rocplot more sensible (the variable may not be a predictor per se)
TODO: add option for smoothed curves

Questions:
- Graph labels: sens & spec or TPR vs FPR?
